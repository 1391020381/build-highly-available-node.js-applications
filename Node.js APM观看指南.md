* Utilization(利用率)
* Saturation(饱和度)
* Errors(误差)
* 简称 USE方法是一种能分析任何系统性能的方法论


* 资源：应用依赖的硬件资源(CPU 硬盘 内存)
* 利用率:以资源一个时间段内被使用的百分比来表示，例如：一个CPU以 90%的利用率运行。
* 饱和度:某个资源排队的数量,例如 当前有五个用户等待。
* 误差/错误(数):出现异常的数量,例如:网络接口有50次超时。

* CPU 内存 吞吐量 的 USE

* 计算密集型:计算 逻辑判断量非常大而且集中的类型,因为主要占用CPU资源所以又叫CPU密集型,当计算任务数等于CPU核心数的时候，是CPU运行效率最高的时候。
* CPU并非 90%时间都在忙，很大一部分时间在等待,多数情况下在等待访问内存.其中又以读内存为主. 过多的内存操纵也会导致CPU利用率过高。
* 排查计算密集型CPU的利器:火焰图
* x轴表示时间长度,也就是占用的CPU时间
* Y轴从上到下,越接近底部表示越接近系统的底层,对于Node.js来说,上层是js代码 下层是C代码
* 每一层上,每个条幅越宽,表示它在整个运行周期中,占用CPU越多。

# QPS & TPS（事务）
* QPS(Query Per Second) 用来衡量服务的性能。
* QPS指每秒中执行的query。
* QPS的值越高,server能处理的request越多。
* 峰值QPS:每天80%的访问集中在20%的时间里,这20%时间叫做峰值时间。
* （总PV数 * 80%） /  （每天秒数* 20%） = 峰值时间每秒请求数(QPS)
* QPS是衡量服务能力的核心指标,是跟每个API挂钩的。不能说某个应用的QPS,而是某某服务的QPS
* QPS哪怕是同样一个应用,不同的服务一会存在很大差异。
# RT 与 Concurrency
* RT（Response-time）响应时间:执行一个请求从开始到最后收到响应数据所话费的总体时间。
* 即从客户端发起请求到服务器响应结果的时间。该请求可以是任何东西,从内存获取,磁盘IO,复杂的数据查询或加载完整的网页。响应时间是一个系统最重要的指标之一,它的数值直接反应了系统快慢。

* 并发数是指系统同时能处理的请求数量,这个也反应了系统的负载能力。
* QPS(TPS) = 并发数/平均响应时间
* 实际业务中很少会达到设计的并发数,但是过长的RT会引起明显的服务体验问题。

# APDEX指数
* 性能指数Apdex(Application Performance Index) 是一个国际通用标准,是用户对应用性能满意度的量化值。


# Graphite架构介绍
1. 指标采集器 metrics 上报协议很通用。
2. 监听器 carbon 接受指标采集器收集上来的数据,做聚合计算,之后存储到缓存与数据库。缓存用于给前端查询。
3. 存储数据库 whisper 用与存储按照时间序列的数据。因为通常监控数据都是时间序列的。

# 三种统计指标类型 metrics
1. Gauges:直接指定要发送到指标数据库的值。比如 CPU利用率  内存等等。
2. Counter:系统内置的计数器会自动跟踪运行总数,我们统计时只需要指定增加多少。当通过flushInterval(时间区间)定义的时间过去后,StatsD将最终累积值发送到指标后端，
3. Sets:系统会自动计算指标类型数。  一般用于统计地区数 浏览器数,错误类型。
# 工具
1. 0x
2. autocannon
3. clinic
4. Graphite
5. Grafana  APM可视化工具
6. StatsD 指标上报
7. express-statsd 发送默认指标
8. lynx 发送自定义指标